---
title: "DistributedSystem_base_02"
date: 2021-11-17T08:45:55+08:00
lastmod:
tags: [distributed_system]
categories: [School Courses]
slug: system models
draft: true
---
# 系统模型
## 简介
- 物理模型是描述系统的-个最显式的方法，它从计算机(和其他设备，例如移动电话)及其互联的网络方面考虑系统的硬件组成。
- 体系结构模型从系统的计算元素执行的计算和通信任务方面来描述系统。
- 基础模型采用抽象的观点描述分布式系统的某个方面。本章介绍考察分布式系统三个重要方面的基础模型:
    - 交互模型，它考虑在系统元素之间通信的结构和顺序;
    - 故障模型，它考虑-一个系统可能不能正确操作的方式;
    - 安全模型，它考虑如何保护系统使其不受到正确操作的干扰或不被窃取数据。

## 物理模型
物理模型是从计算机和所用网络技术的特定细节中抽象出来的分布式系统底层硬件元素的表示。
![](https://raw.githubusercontent.com/QizhengZou/Drawing_bed/main/20211117091203.png)

## 体系结构模型
本节采取一种三阶段方法:
- 首先，描述支撑现代分布式系统的核心基本体系结构元素，重点展示现在已有方法的不同;
- 考察能在开发复杂分布式系统解决方案中单独使用或组合使用的复合体系结构模式;
- 最后，对于以上体系结构风格中出现的不同编程风格，考虑可用于支持它们的中间件平台。

注意，有许多与本章中介绍的体系结构模型相关的权衡，其中涉及采用的系统体系结构元素、所
采用的模式和(在合适的地方)使用的中间件，它们会影响结果系统的性能和有效性。理解这样的权
衡可以说是分布式系统设计中的关键技能。

### 体系结构元素
- 通信实体：从系统的观点，回答通常是非常清楚的,这是因为在一个分布式系统中通信的实体通常是进程，这导致普遍地把分布式系统看成是带有恰当进程间通信范型的多个进程(如在第4章中讨论的)，有两个注意事项:
    - 在一些原始环境中，例如传感器网络,基本的操作系统可能不支持进程抽象(或甚至任何形式的隔离)，因此在这些系统中通信的实体是结点。
    - 在大多数分布式系统环境中，用线程补充进程，所以，严格说来，通信的末端是线程。
- 对象：对象已被引人以便在分布式系统中使用面向对象的方法(包括面向对象的设计和面向对象的编程语言)。在分布式面向对象的方法中，-个计算由若千交互的对象组成，这些对象代表分解给定问题领域的自然单元。对象通过接口被访问，用一个相关的接口定义语言(IDL) 提供定义在一个对象上的方法的规约。分布式对象已经成为分布式系统研究的一个主要领域，第5章和第8章将进- -步
讨论这个话题。
- 组件:因为对象的引入，许多重要的问题已被认为与分布式对象有关，组件技术的出现及使用是
对这些弱点的一个直接响应。组件类似于对象，因为它们为构造分布式系统提供面向问题的抽象，也
是通过接口被访问。关键的区别在于组件不仅指定其(提供的)接口而且给出关于其他组件/接口的
假设，其他组件/接口是组件完成它的功能必须有的。换句话说,组件使得所有依赖显式化，为系统的
构造提供--个更完整的合约。这个合约化的方法鼓励和促进第三方开发组件，也通过去除隐含的依赖
提升了一个更纯粹的组合化方法来构造分布式系统。基于组件的中间件经常对关键领域如部署和服务
器方编程支持提供额外的支持[ Heineman and Councill 2001]。关于基于组件方法的进- -步细节请参见
第8章。
- Web服务: Web 服务代表开发分布式系统的第三种重要的范型[Alonso et al. 2004]。Web 服务与对象和组件紧密相关，也是采取基于行为封装和通过接口访问的方法。但是，相比而言，通过利用Web标准表示和发现服务，Web 服务本质上是被集成到万维网(即W3C)的。W3C ( World Wide
Web)联盟把Web服务定义成：   
一个软件应用，通过URI被辨识，它的接口和绑定能作为XML制品被定义描述和发现。一个Web服务通过在基于互联网的协议上利用基于XML的消息交换支持与其他软件代理的直接交互。   
换句话说，Web服务采用的基于Web的技术在-定程度上定义了Web服务。另一个重要的区别来源于技术使用的风格。对象和组件经常在-一个组织内部使用，用于开发紧耦合的应用，但Web服务本身通常被看成完整的服务，它们可以组合起来获得增值服务，它们经常跨组织边界，因此可以实现业
务到业务的集成。Web服务可以由不同的提供商用不同的底层技术实现。Web服务将在第9章做进一步的探讨。
- 通信范型我们现在转向在分 布式系统中实体如何通信,考虑三种通信范型:
    - 进程间通信;
    - 远程调用;
    - 间接通信。

    - 进程间通信指的是用于分布式系统进程之间通信的相对底层的支持，包括消息传递原语、直接访
    问由互联网协议提供的API (套接字编程)和对多播通信的支持。第4章将详细讨论这样的服务。
    - 远程调用代表分布式系统中最常见的通信范型，覆盖--系列分布式系统中通信实体之间基于双向
    交换的技术，包括调用远程操作、过程或方法。进一步的定义参见下面内容(详细讨论见第5章):
    - 请求-应答协议是一个有效的模式，它加在一个底层消息传递服务之上，用于支持客户-服务器
    计算。特别的，这样的协议通常涉及- -对消息的交换，消息从客户到服务器，接着从服务器返回客户，
    第一个消息包含在服务器端执行的操作的编码，然后是保存相关参数的字节数组，第二个消息包含操
    作的结果，它也被编码成字节数组。这种范型相对原始，实际上仅被用于嵌人式系统，对嵌人式系统来
    说性能是至关重要的。这个方法也被用在5.2节描述的HTTP协议中。正如下面讨论的，大多数分布式
    系统将选择使用远程过程调用或者远程方法调用，但注意底层的请求-应答交换支持两种方法。
    - 远程过程调用( Remote Procedure Call, RPC)的概念，最初由Birell 和Nelson [1984] 提出，代
    表了分布式计算中的一个主要突破。在RPC中,远程计算机上进程中的过程能被调用，好像它们是在
    本地地址空间中的过程一样。底层RPC系统隐藏了分布的重要方面，包括参数和结果的编码和解码、
    消息的传递和保持过程调用所要求的语义。这个方法直接而且得体地支持了客户-服务器计算，其中,
    服务器通过-一个服务接口提供一套操作, 当这些操作本地可用时客户直接调用这些操作。因此，RPC
    系统(在最低程度上)提供访问和位置透明性。
    - 远程方法调用( Remote Method Invocation, RMI) 非常类似于远程过程调用，但它应用于分布式对象的环境。用这种方法，-个发起调用的对象能调用-一个远程对象中的方法。与RPC一样，底层的细节都对用户隐藏。不过，通过支持对象标识和在远程调用中传递对象标识符作为参数，RMI 实现做得更多。它们也从与面向对象语言(见第5章相关讨论)的紧密集成中获得更多的好处。
    - 上述技术具有一个共同点:通信代表发送者和接收者之间的双向关系，其中，发送者显式地把消息/调用送往相关的接收者。接收者通常了解发送者的标识，在大多数情况下，双方必须在同时存在。相比而言，已经出现若千技术，这些技术支持间接通信,通过第三个实体，允许在发送者和接收者之间的深度解耦合。尤其是:
        - 发送者不需要知道他们正在发送给谁(空间解耦合)。
        - 发送者和接收者不需要同时存在(时间解耦合)。

    第6章将详细讨论间接通信。

    间接通信的关键技术包括:

    - 组通信:组通信涉及消息传递给若干接收者，因此是支持一对多通信的多方通信范型。组通信依赖组抽象，-一个组在系统中用-一个组标识符表示。接收方通过加人组，就能选择性接收发送到组的消
    息。发送者通过组标识符发送消息给组，因此，不需要知道消息的接收者。组通常也要维护组成员,
    具有处理组成员故障的机制。
    - 发布-订阅系统:许多系统，例如第1章中金融贸易的例子，被归类于信息分发系统，其中，大
    量生产者(或发布者)为大量的消费者(或订阅者)发布他们感兴趣的信息项(事件)。采用前述的
    任-核心通信范型来实现这个需求是复杂且低效的，因此，出现了发布-订阅系统(有时也叫分布式
    基于事件的系统)用于满足此项重要需求[ Muhl et al. 2006]。发布-订阅系统共享同一个关键的特
    征，即提供-一个中间服务,有效确保由生产者生成的信息被路由到需要这个信息的消费者。
    - 消息队列:虽然发布-订阅系统提供一种一对多风格的通信,但消息队列提供了点对点服务,其
    中生产者进程能发送消息到一个指定的队列，消费者进程能从队列中接收消息，或被通知队列里有新
    消息到达。因此，队列是生产者和消费者进程的中介。
    - 元组空间:元组空间提供了进-步的间接通信服务，并支持这样的模型一进程 能把任意的结构
    化数据项( 称为元组)放到一个持久元组空间，其他进程可以指定感兴趣的模式，从而可以在元组空
    间读或者删除元组。因为元组空间是持久的，读操作者和写操作者不需要同时存在。这种风格的编程，
    也被称为生成通信，由Gelemter [ 1985]作为- -种并行编程范型引人。已经开发了不少分布式实现，
    采用了客户-服务器-风格的实现或采用了更分散的对等方法。
    - 分布式共享内存:分布式共享内存(Distributed Shared Memory, DSM)系统提供一种抽象，用于
    支持在不共享物理(内存的进程之间共享数据。提供给程序员的是-套熟悉的读或写(共享)数据结构
    的抽象，就好像这些数据在程序员自已本地的地址空间- -样,从而提供了高层的分布透明性。基本的
    基础设施必须确保以及时的方式提供副本，也必须处理与数据同步和一致性相关的问题。分布式共享
    内存的概述在第6章中介绍。
- 到目前为止讨论的体系结构  
![](https://raw.githubusercontent.com/QizhengZou/Drawing_bed/main/20211117094255.png)

- 角色和责任，在一个分布式系统中, 进程，或者说，对象、组件、服务，包括Web服务(为简单
起见，我们在本节中使用术语“进程”)相互交互完成一个有用的活动，例如支持一次聊天会话。在
这样做的时候，进程扮演给定的角色，在建立所采用的整体体系结构时，这些角色是基本的。本节我们考察两种起源于单个进程角色的体系结构风格:客户-服务器风格和对等风格。
    - 客户-服务器:这是讨论分布式系统时最常引用的体系结构。它是历史上最重要的体系结构，现
    在仍被广泛地使用。图2-3 给出了一个简单的结构，其中，进程扮演服务器和客户的角色。特别是,为了访问服务器管理的共享资源，客户进程可以与不同主机上的服务器进程交互。![](https://raw.githubusercontent.com/QizhengZou/Drawing_bed/main/20211117094742.png)如图2-3所示，一台服务器也可以是其他服务器的客户。例如，Web服务器通常是管理存储Web
    页面文件的本地文件服务器的客户。Web 服务器和大多数其他互联网服务是DNS服务的客户，DNS服
    务用于将互联网域名翻译成网络地址。另一个与Web相关的例子是搜索引擎,搜索引擎能让用户通过
    互联网查看Web页面上可用的信息汇总。这些信息汇总通过称为“Web 抓取”的程序形成，该程序在
    搜索引擎站点以后台方式运行，利用HTTP请求访问互联网上的Web服务器。因此，搜索引擎既是服
    务器又是客户:它回答来自浏览器客户的查询，并且运行作为其他Web服务器客户的Web抓取程序。
    在这个例子中，服务器任务(对用户查询的回答)和Web抓取的任务( 向其他Web服务器发送请求)
    是完全独立的，很少需要同步它们，它们可以并行运行。事实上,一个典型的搜索引擎正常情况下包
    含许多并发执行的线程，一些线程为它的客户服务，另一些线程运行Web抓取程序。
    - 对等体系结构:在这种体系结构中,涉及一项任务或活动的所有进程扮演相同的角色，作为对等方进行协作交互，不区分客户和服务器或运行它们的计算机。在实践中，所有的参与进程运行相同的
    程序并且相互之间提供相同的接口集合。虽然客户-服务器模型为数据和其他资源的共享提供了一一个
    直接和相对简单的方法，但客户-服务器模型的伸缩性比较差。将-一个服 务放在单个地址中意味着集
    中化地提供服务和管理，它的伸缩性不会超过提供服务的计算机的能力和该计算机所在网络连接的
    带宽。
- 放置：最后要考虑的问题是诸如对象或服务这样的实体是怎样映射到底层的物理分布式基础设施
上的，物理分布式基础设施由大量的机器组成，这些机器通过- - 个任意复杂的网络互联。从决定分布
式系统特性的角度而言，放置是关键的，这些特性大多数与性能相关，也包括其他特性如可靠性和安
全性。   
从机器和机器内部进程的角度看，在哪里放置-一个给定客户或服务器的问题是需要仔细设计的。
放置需要考虑实体间的通信模式、给定机器的可靠性和它们当前的负载、不同机器之间的通信质量等。
必须用有说服力的应用知识来确定放置,有些通用的指导方针可以用来获得一个优化的解决方案。因
此，我们主要关注下列放置策略,它们能显著地改变-一个给定设计的特征(我们在2.3.2节又回到关
于物理基础设施映射的关键问题，那里，我们主要考察层次化的体系结构):
    - 将服务映射到多个服务器;
    - 缓存;
    - 移动代码;
    - 移动代理。
    - 将服务映射到多个服务器:服务可实现成在-个单独主机上的几个服务器进程，在必要时进行交
    互以便为客户进程提供服务(参见图2-4b)。服务器可以将服务所基于的对象集分区，然后将这些分
    区分布到各个服务器上;或者服务器可以在几个主机上维护复制的对象集。
    - 缓存:缓存用于存储最近使用的数据对象，这些被存储的数据对象比对象本身更靠近-一个客户或特定的- -组客户。当服务器接收-一个新对象时,就将它存入缓存,必要的时候会替换缓存中已存在的
    对象。当客户进程需要一个对象时，缓存服务首先检查缓存，如果缓存中有最新的拷贝可用就提供缓
    存中的对象;如果缓存没有可用的对象，才去取一个最新的拷贝。每个客户都可以配置缓存或者将缓
    存放置在由几个客户共享的代理服务器上。
    - 移动代码:第1章介绍了移动代码。applet 是一个众所周知的并被广泛使用的移动代码例子，即运
    行浏览器的用户选择了一个到applet的链接，applet 的代码存储在Web服务器上，将applet的代码下载
    到浏览器并在浏览器端运行。在本地运行下载的代码的好处是能够提供良好的交互响应，因为它不受与网络通信相关的延迟或带宽变化的影响。
    - 移动代理:移动代理是-一个运行的程序(包括代码和数据)，它从一台计算机移动到网络上的另
    一台计算机，代表某人完成诸如信息搜集之类的任务，最后返回结果。-一个移动代理可能多次调用所
    访问地点的本地资源一例如， 访问-一个数据库条目。如果将这种体系结构与对某些资源进行远程调
    用的静态客户相比，那么后者可能会传输大量的数据，前者通过用本地调用替换远程调用而降低了通
    信开销和时间。

### 体系结构模式
我们给出分布式系统中几个关键的体系结构模型，包括分层体系结构( layering architecture)、层次化体系结构( tiered ar-
chitecture)和瘦客户相关的概念(包括虚拟网络计算的特定机制)。我们也把Web服务当做一个体系结构模式进行了考察，给出了其他可以应用在分布式系统中的模式。
- 分层，分层的概念是-一个熟悉的概念，与抽象紧密相关。在分层方法中，一个复杂的系统被分成
若干层，每层利用下层提供的服务。因此，一个给定的层提供-一个软件抽象，更高的层不清楚实现细
节，或不清楚在它下面的其他层。
就分布式系统而言，这等同于把服务垂直组织成服务层。一个分布式服务可由一个或多个服务器
进程提供，这些进程相互交互，并与客户进程交互，维护服务中的资源在系统范围内的-致视图。
- 层次化体系结构层次化体系结构 与分层体系结构是互补的。分层将服务垂直组织成抽象层，而
层次化是一项组织给定层功能的技术，它把这个功能放在合适的服务器上，或者作为第二选择放在物
理结点上。
- AJAX的作用:在1.6节中，我们介绍了AJAX ( Asynchronous Javascript And XML)是Web所使用
的标准客户-服务器交互方式的扩展。AJAX满足了Javascript 前端程序( 运行在Web浏览器中)和基
于服务器的后端程序(拥有描述应用状态的数据)之间的细粒度通信的需要。概括而言，在标准的
Web交互方式中，浏览器发送HTTP请求给服务器，请求给定URL的页面、图像或其他资源。服务器
发送整个页面作为应答，这个页面或者从服务器上的-一个文件中读取，或者由一个程序生成，取决于
URL中可识别的资源类型。当客户收到内容时，浏览器根据其MIME类型( text/html、image/jpg 等)
相关的显示方式呈现它。虽然Web页面由不同类型的内容项组成，但是整个页面以它在html页面定义
中指定的方式由浏览器组合并呈现。
- 瘦客户，分布式计算的趋势是将复杂性从最终用户设备移向互联网服务。这点在向云计算(见
第1章)发展的趋势中最明显，在上面讨论的层次化体系结构中也能看到。这个趋势导致了对瘦客户
概念的兴趣，它使得能以很少的对客户设备的假设或需求，获得对复杂网络化服务的访问，这些服务可以通过云解决方案提供。更具体来说，术语瘦客户
指的是-一个软件层，在执行一个应用程序或访问远程
计算机上的服务时，由该软件层提供-一个基于窗口的
本地用户界面。
- 其他经常出现的模式：
    - 代理
    - web服务中的业务代理
    - 反射



### 相关的中间件解决方案
## 基础模型
### 交互模型
### 故障模型
### 安全模型
## 小结        


